/*! guitar-tabs - v0.6.0 - 2015-04-05*/
angular.module("templates-main",["artists/artist-detail.tpl.html","artists/artist-list.tpl.html","common/templates/login-form.tpl.html","common/templates/main-menu.tpl.html","common/templates/pods.tpl.html","common/templates/tag-list.tpl.html","songs/song-detail.tpl.html","songs/song-form.tpl.html","songs/song-list.tpl.html","spotify/spotify-artist-search.tpl.html","spotify/spotify-search.tpl.html","tabs/tab-detail.tpl.html","tabs/tab-form.tpl.html","tabs/tab-list.tpl.html","tags/tag-detail.tpl.html","tags/tag-list.tpl.html","videos/video-detail.tpl.html","videos/video-form.tpl.html","videos/video-list.tpl.html","videos/video-modal.tpl.html"]),angular.module("artists/artist-detail.tpl.html",[]).run(["$templateCache",function(a){a.put("artists/artist-detail.tpl.html",'<div style="margin: 40px">\n	<h1>{{artist.name}} <small>{{artist.spotifyData.genres.join(",")}}</small></h1>\n	<div class="row">\n		<div class="col-lg-3 col-md-4 list-col">\n			<img ng-src="{{artist.spotifyData.images[0].url}}" height="{{artist.spotifyData.images[0].height}}" width="{{artist.spotifyData.images[0].width}}" alt="{{artist.name}}">\n		</div>\n		<!-- <div class="col-lg-6 col-md-6 list-col">\n			<div class="well">\n				<ul class="list-unstyled">\n					<li><strong>Genres:</strong> {{artist.spotifyData.genres.join(",")}}</li>\n				</ul>\n			</div>\n		</div>\n -->	</div>\n</div>\n\n<!-- <pre>{{artist | json}}</pre> -->\n<!-- <pre>{{spotifyArtist | json}}</pre>\n<pre>{{spotifyData | json}}</pre> -->')}]),angular.module("artists/artist-list.tpl.html",[]).run(["$templateCache",function(a){a.put("artists/artist-list.tpl.html",'<div class="container">\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n	<div class="list-group">\n		<div class="list-group-item" ng-repeat="artist in artists" ng-click="go(\'/artists/\' + artist.id)">\n			<div class="row">\n				<div class="col-lg-3 col-md-3 list-col">\n					<div ng-show="!artist.spotifyData.images[2].url" class="list-icon">\n					<span class="glyphicon glyphicon-user"></span>\n					</div>\n					<img src="{{artist.spotifyData.images[2].url}}" alt="{{artist.name}}" class="list-image" ng-show="artist.spotifyData.images[2].url">\n				</div>\n				<div class="col-lg-8 col-md-8 list-col">\n					<h4>{{artist.name}}</h4>\n					<p ng-bind="artist.spotifyData.genres.join()"></p>\n					<p ng-bind="artist.tags.join()"></p>\n				</div>\n			</div>\n		</div>\n	</div>\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n</div>')}]),angular.module("common/templates/login-form.tpl.html",[]).run(["$templateCache",function(a){a.put("common/templates/login-form.tpl.html",'<div class="container" style="margin-top: 30px">\n<form class="form-signin" role="form">\n    <h2 class="form-signin-heading">Please sign in</h2>\n    <div class="alert alert-warning" ng-show="authError">{{authError}}</div>\n    <input type="text" class="form-control input-lg" ng-model="user.id" placeholder="Username" required autofocus>\n    <input type="password" class="form-control input-lg" placeholder="Password" ng-model="user.password" required>\n    <button class="btn btn-lg btn-primary btn-block" ng-click="login()" ng-disabled=\'form.$invalid\'>Sign in</button>\n  </form>\n</div>')}]),angular.module("common/templates/main-menu.tpl.html",[]).run(["$templateCache",function(a){a.put("common/templates/main-menu.tpl.html",'<div ng-controller="MenuCtrl">\n	<div class="list-group">\n		<a href="#/browse/tabs" class="list-group-item-block" ng-click="navigation.menu.close()">Tabs</a>\n		<a href="#/browse/videos" class="list-group-item-block" ng-click="navigation.menu.close()">Videos</a>\n		<a href="#/browse/songs" class="list-group-item-block" ng-click="navigation.menu.close()">Songs</a>\n		<a href="#/browse/artists" class="list-group-item-block" ng-click="navigation.menu.close()">Artists</a>\n		<a href="#/browse/tags" class="list-group-item-block" ng-click="navigation.menu.close()">Tags</a>\n		<a href="#{{navigation.newUrl}}" ng-show="navigation.newUrl" class="list-group-item-block" ng-click="navigation.menu.close()">New</a>\n	</div>\n</div>\n\n<!-- <ul class="nav nav-pills nav-stacked">\n  <li><a href="#/browse/tabs">Tabs</a></li>\n	<li><a href="#/browse/songs">Songs</a></li>\n	<li><a href="#/browse/artists">Artists</a></li>\n	<li><a href="#{{navigation.newUrl}}" ng-show="navigation.newUrl">New</a></li>\n</ul> -->')}]),angular.module("common/templates/pods.tpl.html",[]).run(["$templateCache",function(a){a.put("common/templates/pods.tpl.html",'<div>\n	<div class="list-group">\n		<h4 class="list-group-item list-group-item-heading">Tabs</h4>\n		<a href="#" class="list-group-item">Test 1</a>\n		<a href="#" class="list-group-item">Test 2</a>\n	</div>\n</div>')}]),angular.module("common/templates/tag-list.tpl.html",[]).run(["$templateCache",function(a){a.put("common/templates/tag-list.tpl.html",'<div>\n	<h3>Tags</h3>\n	<div class="list-group">\n	<a href="#/tags/{{tag.id}}" class="list-group-item" ng-repeat="tag in tags">\n	  <span class="badge" ng-bind="tag.count"></span>\n	  <h4 class="list-group-item-heading" ng-bind="tag.id"></h4>\n	</a>\n</div>')}]),angular.module("songs/song-detail.tpl.html",[]).run(["$templateCache",function(a){a.put("songs/song-detail.tpl.html",'<div style="margin: 40px">\n	<h1>{{song.title}} <small>{{song.artist.name}}</small></h1>\n	<div class="row">\n		<div class="col-lg-3 col-md-4 list-col">\n			<img ng-src="{{track.album.images[1].url}}" height="{{track.album.images[1].height}}" width="{{track.album.images[1].width}}" alt="{{song.title}}">\n		</div>\n		<div class="col-lg-6 col-md-6 list-col">\n			<!-- <p class="lead">{{movie.Plot}}</p> -->\n			<div class="well">\n				<ul class="list-unstyled">\n					<li><strong>Album:</strong> {{track.album.title}}</li>\n					<li><strong>Track #: </strong>{{track.track_number}}</li>\n					<li><strong>Duration: </strong>{{track.duration_ms | msToMinutes}}</li>\n				</ul>\n				<div><audio ng-src="{{track.preview}}" controls></audio></div>\n			</div>\n		</div>\n	</div>\n</div>')}]),angular.module("songs/song-form.tpl.html",[]).run(["$templateCache",function(a){a.put("songs/song-form.tpl.html",'<div class="container" style="margin-top: 30px">\n<form role="form" ng-submit="save()">\n  <div class="form-group">\n    <label for="title">Title</label>\n    <input type="text" class="form-control input-lg" name="title" ng-model="song.title" required>\n  </div>\n  <div class="form-group">\n    <label for="artist">Artist</label><spotify-artist-search artist="song.artist"></spotify-artist-search>\n    <input type="text" class="form-control input-lg" name="artist" ng-model="song.artist.name" ng-options="artist as artist.name" />\n  </div>\n  <button type="submit" class="btn btn-default">Save</button>\n  <span style="margin-left: 5px" id="message"></span>\n</form>\n</div>')}]),angular.module("songs/song-list.tpl.html",[]).run(["$templateCache",function(a){a.put("songs/song-list.tpl.html",'<div class="container">\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n	<div class="list-group">\n		<div class="list-group-item" ng-repeat="song in songs" ng-click="navigation.go(\'/songs/\' + song.id)">\n			<div class="row">\n				<div class="col-lg-2 col-md-2 list-col">\n					<div ng-show="!song.album.image" class="list-icon">\n					<span class="glyphicon glyphicon-music"></span>\n					</div>\n					<img src="{{song.album.image}}" alt="{{song.album.title || song.title}}" class="list-image" ng-show="song.album.image">\n				</div>\n				<div class="col-lg-8 col-md-8 list-col">\n					<h4>{{song.title}}</h4>\n					<p><a href="">{{song.album.title}}</a></p>\n					<p><a href="">{{song.artist.name}}</a></p>\n					<p ng-bind="song.tags.join()"></p>\n				</div>\n			</div>\n		</div>\n	</div>\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n</div>')}]),angular.module("spotify/spotify-artist-search.tpl.html",[]).run(["$templateCache",function(a){a.put("spotify/spotify-artist-search.tpl.html",'\n<div class="row">\n	  <div class="col-lg-12 col-md-12">\n	\n			<form class="form-horizontal">			\n				<div class="spotify-search-form">\n				<input type="text" class="form-control" ng-model="search.artist" placeholder="Artist">				\n				<button class="btn btn-default" type="button" ng-click="search.find()">Search</button>\n				</div>\n			</form>\n			\n	</div><!-- /.col-lg-6 -->\n</div>\n<div style="margin-top: 20px">\n	<div class="list-group">\n	<div class="list-group-item" ng-repeat="artist in artists">\n	<div class="row">\n		<div class="col-lg-4 col-md-4">\n			<img src="{{artist.images[0].url}}" alt="{{artist.name}}" width="100px">\n		</div>\n		<div class="col-lg-8 col-md-8">\n			<h4 class="list-group-item-heading"><a ng-click="search.selectArtist(artist)" data-dismiss="modal">{{artist.name}}</a></h4>\n			<p class="list-group-item-text">{{artist.genres.join(", ")}}</p>\n		</div>\n	</div>\n	</div>\n	</div>\n</div>\n')}]),angular.module("spotify/spotify-search.tpl.html",[]).run(["$templateCache",function(a){a.put("spotify/spotify-search.tpl.html",'\n<div class="row">\n	  <div class="col-lg-12 col-md-12">\n	\n			<form class="form-horizontal">\n				\n				<div class="spotify-search-form">\n				<input type="text" class="form-control" ng-model="search.track" placeholder="Track">\n				\n		\n				<input type="text" class="form-control" ng-model="search.artist" placeholder="Artist">\n				\n				<button class="btn btn-default" type="button" ng-click="search.findTracks()">Search</button>\n				</div>\n			</form>\n			\n	</div><!-- /.col-lg-6 -->\n</div>\n<div style="margin-top: 20px">\n	<div class="list-group">\n	<div class="list-group-item" ng-repeat="track in tracks">\n	<div class="row">\n		<div class="col-lg-4 col-md-4">\n			<img src="{{track.album.image.url}}" alt="{{track.album.title}}" width="100px">\n		</div>\n		<div class="col-lg-8 col-md-8">\n			<h4 class="list-group-item-heading"><a ng-click="search.selectTrack(track)" data-dismiss="modal">{{track.title}}</a></h4>\n			<p class="list-group-item-text"><strong>Album:</strong> {{track.album.title}}</p>\n			<p class="list-group-item-text"><strong>Artist:</strong> {{track.artist.name}}</p>\n			<p class="list-group-item-text"><strong>Uri: </strong> {{track.uri}}</p>\n			<div>\n			<audio ng-src="{{track.preview}}" controls></audio>\n			</div>\n		</div>\n	</div>\n	</div>\n	</div>\n</div>\n')}]),angular.module("tabs/tab-detail.tpl.html",[]).run(["$templateCache",function(a){a.put("tabs/tab-detail.tpl.html",'<div class="container-fluid">\n  <!-- <h1>{{tab.title}}</h1> -->\n	<div class="row-fluid">\n		<div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">\n			<!-- <p class="text-muted">{{tab.tags.join()}}</p> -->\n\n			<pre class="tab-fullscreen">{{tab.content}}</pre>\n		</div>\n		<div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">\n			<!-- <div class="btn-group-vertical bs-sidebar" role="group" aria-label="" data-offset-top="-65" bs-affix style="margin-top:20px;">\n 				<button type="button" class="btn btn-default"><span class="glyphicon glyphicon-plus"></span></button>\n 				<button type="button" class="btn btn-default"><span class="glyphicon glyphicon-edit"></span></button>\n			</div> -->\n\n			<div class="bs-sidebar" data-offset-top="-60" bs-affix>\n				<div style="width: 220px">\n					<!-- List group -->\n				<div class="panel panel-default">\n					<a class="btn btn-default btn-lg btn-block" href="#/tabs/edit/{{tab.id}}"><span class="glyphicon glyphicon-edit"></span> Edit</a>\n						<!-- <button type="button" class="btn btn-primary btn-block"><span class="glyphicon glyphicon-edit"></span> Edit</button> -->\n				</div>\n				\n				<!-- <div ng-include="\'tabs/tab-pod.tpl.html\'"></div> -->\n				<song-pods song-id="tab.song.id" />\n				</div>\n			</div>\n\n		</div>\n	</div>\n</div>')}]),angular.module("tabs/tab-form.tpl.html",[]).run(["$templateCache",function(a){a.put("tabs/tab-form.tpl.html",'<div class="container" style="margin-top: 30px">\n<form role="form" ng-submit="save()">\n  <div class="form-group">\n    <label for="title">Title</label>\n    <input type="text" class="form-control input-lg" name="title" ng-model="tab.title" required>\n  </div>\n    <div class="form-group">\n    <label for="song">Song</label><spotify-search song="tab.song"></spotify-search>\n    <input type="text" class="form-control input-lg" ng-model="tab.song" ng-options="song as song.title for song in getSongs($viewValue)" data-min-length="2" placeholder="Enter Song" bs-typeahead>\n    <!-- <input type="text" class="form-control input-lg" ng-model="tab.song.title" > -->\n  </div>\n\n\n  <div class="form-group">\n    <label for="artist">Artist</label>\n    <input type="text" class="form-control input-lg" name="artist" ng-model="tab.song.artist.name" />\n  </div>\n  <!-- <div class="form-group">\n    <label for="key">Key</label>\n    <input type="text" class="form-control input-lg" name="key" ng-model="tab.key" />\n  </div> -->\n  <div class="form-group">\n    <label for="content">Tab</label>\n    <textarea name="content" ng-model="tab.content" class="form-control input-lg tab-field" rows="14"></textarea>\n  </div>\n  <div class="form-group">\n    <label for="tags">Tags</label>\n    <tags-input ng-model="tags"></tags-input>\n  </div>\n  <!-- <div><pre>{{tab | json}}</pre></div> -->\n  <button type="submit" class="btn btn-primary">Save</button>\n  <span style="margin-left: 5px" id="message"></span>\n</form>\n</div>')}]),angular.module("tabs/tab-list.tpl.html",[]).run(["$templateCache",function(a){a.put("tabs/tab-list.tpl.html",'<div class="container" ng-show="ready">\n	<input type="text" class="form-control input-lg" ng-model="filter" placeholder="Search">\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n	<div class="list-group">\n		<div class="list-group-item" ng-repeat="tab in tabs" ng-click="go(\'/tabs/\' + tab.id)">\n			<div class="row">\n				<div class="col-lg-2 col-md-2 list-col">\n					<div ng-show="!tab.song.album.images[1].url" class="list-icon">\n					<span class="glyphicon glyphicon-music"></span>\n					</div>\n					<img class="media-object list-image" src="{{tab.song.album.images[1].url}}" alt="{{tab.song.album.title || tab.title}}" ng-show="tab.song.album.images[1].url">\n				</div>\n				<div class="col-lg-8 col-md-8 list-col">\n					<h4>{{tab.title}}</h4>\n					<p><a ng-href="#/songs/{{tab.song.id}}" >{{tab.song.title}}</a></p>\n					<p><a >{{tab.song.album.title}}</a></p>\n					<p><a ng-href="#/artists/{{tab.song.artist.id}}">{{tab.song.artist.name}}</a></p>\n					<p ng-bind="tab.tags.join()"></p>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n</div>')}]),angular.module("tags/tag-detail.tpl.html",[]).run(["$templateCache",function(a){a.put("tags/tag-detail.tpl.html",'<div class="container-fluid">\n	<div class="row-fluid">\n		<div class="list-group">\n			<div class="list-group-item" ng-repeat="tab in tag.tabs" ng-click="go(\'/tabs/\' + tab.id)">\n					<span class="badge">Tab</span>\n					<h4>{{tab.title}}</h4>\n			</div>\n			<div class="list-group-item" ng-repeat="video in tag.videos" ng-click="go(\'/videos/\' + video.id)">\n					<span class="badge">Video</span>\n					<h4>{{video.title}}</h4>\n			</div>\n		</div>\n	</div>\n</div>')}]),angular.module("tags/tag-list.tpl.html",[]).run(["$templateCache",function(a){a.put("tags/tag-list.tpl.html",'<div class="container">\n	<input type="text" class="form-control input-lg" ng-model="filter" placeholder="Search">\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n	<div class="list-group">\n		<div class="list-group-item" ng-repeat="tag in tags" ng-click="go(\'/tags/\' + tag.id)">\n				<span class="badge">{{tag.total}}</span>\n				<h4>{{tag.title}}</h4>\n		</div>\n	</div>\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n</div>')}]),angular.module("videos/video-detail.tpl.html",[]).run(["$templateCache",function(a){a.put("videos/video-detail.tpl.html",'<div class="container-fluid">\n  <!-- <h1>{{video.title}}</h1> -->\n	<div class="row-fluid">\n		<div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">\n			<!-- <p class="text-muted">{{video.tags.join()}}</p> -->\n			<div class="embed-responsive embed-responsive-16by9">\n				<iframe width="853" height="480" ng-src="{{videoUrl}}" class="embed-responsive-item" allowfullscreen></iframe>\n			</div>\n		</div>\n		<div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">\n			<div class="bs-sidebar" data-offset-top="-60" bs-affix>\n				<div style="width: 220px">\n					<!-- List group -->\n				<div class="panel panel-default">\n					<a class="btn btn-default btn-lg btn-block" href="#/videos/edit/{{video.id}}"><span class="glyphicon glyphicon-edit"></span> Edit</a>\n				</div>\n				\n				<!-- <div ng-include="\'videos/video-pod.tpl.html\'"></div> -->\n				<song-pods song-id="video.song.id" />\n				</div>\n			</div>\n\n		</div>\n	</div>\n</div>')}]),angular.module("videos/video-form.tpl.html",[]).run(["$templateCache",function(a){a.put("videos/video-form.tpl.html",'<div class="container" style="margin-top: 30px">\n<form role="form" ng-submit="save()">\n  <div class="form-group">\n    <label for="title">Title</label>\n    <input type="text" class="form-control input-lg" name="title" ng-model="video.title" required>\n  </div>\n    <div class="form-group">\n    <label for="code">Code</label>\n     <input type="text" class="form-control input-lg" name="code" ng-model="video.code" />\n  </div>\n  <div class="form-group">\n    <label for="song">Song</label><spotify-search song="video.song"></spotify-search>\n    <input type="text" class="form-control input-lg" ng-model="video.song" ng-options="song as song.title for song in getSongs($viewValue)" data-min-length="2" placeholder="Enter Song" bs-typeahead>\n    <!-- <input type="text" class="form-control input-lg" ng-model="video.song.title" > -->\n  </div>\n  <div class="form-group">\n    <label for="artist">Artist</label>\n    <input type="text" class="form-control input-lg" name="artist" ng-model="video.song.artist.name" />\n  </div>\n  <div class="form-group">\n    <label for="tags">Tags</label>\n    <tags-input ng-model="tags"></tags-input>\n  </div>\n  <!-- <div><pre>{{video | json}}</pre></div> -->\n  <button type="submit" class="btn btn-primary">Save</button>\n  <span style="margin-left: 5px" id="message"></span>\n</form>\n</div>')}]),angular.module("videos/video-list.tpl.html",[]).run(["$templateCache",function(a){a.put("videos/video-list.tpl.html",'<div class="container">\n	<input type="text" class="form-control input-lg" ng-model="filter" placeholder="Search">\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n	<div class="list-group">\n		<div class="list-group-item" ng-repeat="video in videos" ng-click="go(\'/videos/\' + video.id)">\n			<div class="row">\n				<div class="col-lg-2 col-md-2 list-col">\n					<div ng-show="!video.song.album.images[1].url" class="list-icon">\n					<span class="glyphicon glyphicon-music"></span>\n					</div>\n					<img class="media-object list-image" src="{{video.song.album.images[1].url}}" alt="{{video.song.album.title || video.title}}" ng-show="video.song.album.images[1].url">\n				</div>\n				<div class="col-lg-8 col-md-8 list-col">\n					<h4>{{video.title}}</h4>\n					<p><a ng-href="#/songs/{{video.song.id}}" >{{video.song.title}}</a></p>\n					<p><a >{{video.song.album.title}}</a></p>\n					<p><a ng-href="#/artists/{{video.song.artist.id}}">{{video.song.artist.name}}</a></p>\n					<p ng-bind="video.tags.join()"></p>\n				</div>\n			</div>\n		</div>\n	</div>\n	<pagination num-pages="pagination.count" current-page="pagination.current" on-select-page="changePage(page)"></pagination>\n</div>')}]),angular.module("videos/video-modal.tpl.html",[]).run(["$templateCache",function(a){a.put("videos/video-modal.tpl.html",'<div class="embed-responsive embed-responsive-16by9">\n<iframe class="embed-responsive-item" width="560" height="315" ng-src="{{videoUrl}}" frameborder="0" allowfullscreen></iframe>\n</div>')}]),app=angular.module("app",["ngRoute","tabs","videos","songs","artists","security","tags","templates-main"]),app.filter("msToMinutes",function(){return function(a){var b=Math.floor(a/1e3),c=Math.floor(b%86400%3600/60);return b-=60*c,c+":"+b}}),app.config(["$httpProvider",function(a){a.interceptors.push("securityInterceptor")}]),app.config(["$sceDelegateProvider",function(a){a.resourceUrlWhitelist(["self","https://p.scdn.co/**"])}]),app.config(["$routeProvider",function(a){a.when("/login",{templateUrl:"common/templates/login-form.tpl.html",controller:"LoginCtrl"}).when("/browse/tabs",{templateUrl:"tabs/tab-list.tpl.html",controller:"TabListCtrl"}).when("/browse/videos",{templateUrl:"videos/video-list.tpl.html",controller:"VideoListCtrl"}).when("/browse/songs",{templateUrl:"songs/song-list.tpl.html",controller:"SongListCtrl"}).when("/browse/artists",{templateUrl:"artists/artist-list.tpl.html",controller:"ArtistListCtrl"}).when("/browse/tags",{templateUrl:"tags/tag-list.tpl.html",controller:"TagListCtrl"}).when("/spotify/songs",{templateUrl:"songs/spotify-search.tpl.html",controller:"SpotifySongSearchCtrl"}).when("/tabs/new",{templateUrl:"tabs/tab-form.tpl.html",controller:"TabEditCtrl"}).when("/videos/new",{templateUrl:"videos/video-form.tpl.html",controller:"VideoEditCtrl"}).when("/songs/new",{templateUrl:"songs/song-form.tpl.html",controller:"SongEditCtrl"}).when("/tabs/edit/:id",{templateUrl:"tabs/tab-form.tpl.html",controller:"TabEditCtrl"}).when("/songs/edit/:id",{templateUrl:"songs/song-form.tpl.html",controller:"SongEditCtrl"}).when("/videos/edit/:id",{templateUrl:"videos/video-form.tpl.html",controller:"VideoEditCtrl"}).when("/tabs/:id",{templateUrl:"tabs/tab-detail.tpl.html",controller:"TabDetailCtrl"}).when("/videos/:id",{templateUrl:"videos/video-detail.tpl.html",controller:"VideoDetailCtrl"}).when("/tags/:id",{templateUrl:"tags/tag-detail.tpl.html",controller:"TagDetailCtrl"}).when("/songs/:songId/tabs/new",{templateUrl:"tabs/tab-form.tpl.html",controller:"TabEditCtrl"}).when("/songs/:songId/videos/new",{templateUrl:"videos/video-form.tpl.html",controller:"VideoEditCtrl"}).when("/songs/:id",{templateUrl:"songs/song-detail.tpl.html",controller:"SongDetailCtrl"}).when("/artists/:id",{templateUrl:"artists/artist-detail.tpl.html",controller:"ArtistDetailCtrl"}).otherwise({redirectTo:"/browse/tabs"})}]),app.run(["authorizationProvider",function(a){a.init()}]),app.controller("HeaderCtrl",["$scope","$location","navigation",function(a,b,c){a.menu={},a.navigation=c,a.item={};a.$watch(function(){return b.path()},function(b){var d=b.split("/");a.menu={},a.item={};var e;switch(d[1]){case"browse":e=d[2],c.title="Browse: "+e.charAt(0).toUpperCase()+e.substr(1).toLowerCase(),c.newUrl="/"+e+"/new";break;case"search":a.menu.type="search";break;default:e=d[1],c.editUrl=null,c.newUrl="/"+e+"/new"}})}]),app.controller("MenuCtrl",["$scope","navigation",function(a,b){a.navigation=b}]),app.controller("LoginCtrl",["$scope","$location","authorizationProvider",function(a,b,c){a.login=function(){c.login(a.user.id,a.user.password,function(){b.path("/tabs")},function(){a.authError="Logon failed! Please make sure your username and password are correct."})}}]);var artistService=angular.module("artists.service",[]);artistService.factory("Artist",["$http","$q",function(a){var b="/index.cfm/artists",c=function(a){angular.extend(this,a)};return c.get=function(b,c,d){a.get("/index.cfm/artists/"+b).then(c,d)},c.getItems=function(b,c,d){var e={limit:10,offset:0,fields:"id,name,tags,spotifyData",expand:0};b=angular.extend(e,b),a.get("/index.cfm/artists/?limit="+b.limit+"&offset="+b.offset+"&expand="+b.expand+"&fields="+b.fields).then(c,d)},c.search=function(b){return a.get("/index.cfm/artists/search/"+b)},c.prototype.save=function(c,d){d||(d=function(){});var e=this;this.id&&""!==this.id?a.put(b+"/"+this.id,{name:this.name,tags:this.tags}).then(function(a){e.id=a.data.id,c(a)},d):a.post(b,{name:this.name,tags:this.tags}).then(function(a){e.id=a.data.id,c(a)},d)},c}]),artists=angular.module("artists",["artists.service","spotify","navigation","mgcrea.ngStrap"]),artists.controller("ArtistListCtrl",["$scope","Artist","navigation",function(a,b,c){a.pagination={},a.go=c.go,b.getItems({limit:10},function(b){a.artists=b.data.items,a.pagination.count=Math.ceil(b.data.total/b.data.limit),a.pagination.current=parseInt(b.data.offset,8)+1}),a.changePage=function(c){var d=c-1;b.getItems({offset:d},function(b){a.artists=b.data.items})}}]),artists.controller("ArtistDetailCtrl",["$scope","Artist","SpotifyArtist","$routeParams","navigation",function(a,b,c,d,e){a.navigation=e,b.get(d.id,function(c){a.artist=new b(c.data),e.title=a.artist.name})}]),angular.module("directives.pagination",[]).directive("pagination",function(){return{restrict:"E",scope:{numPages:"=",currentPage:"=",onSelectPage:"&"},template:'<div class="btn-group btn-group-lg pagination hidden"><button type="button" class="btn btn-default" ng-class="{disabled: noPrevious()}" ng-click="selectPrevious()">Previous</button><button type="button" class="btn btn-default" ng-repeat="page in pages" ng-class="{active: isActive(page)}" ng-click="selectPage(page)">{{page}}</button><button type="button" class="btn btn-default" ng-class="{disabled: noNext()}" ng-click="selectNext()">Next</button></div>',replace:!0,link:function(a,b){a.$watch("numPages",function(c){a.pages=[];for(var d=1;c>=d;d++)a.pages.push(d);a.currentPage>c&&a.selectPage(c),a.pages.length&&b.removeClass("hidden")}),a.noPrevious=function(){return 1===a.currentPage},a.noNext=function(){return a.currentPage===a.numPages},a.isActive=function(b){return a.currentPage===b},a.selectPage=function(b){a.isActive(b)||(a.currentPage=b,a.onSelectPage({page:b}))},a.selectPrevious=function(){a.noPrevious()||a.selectPage(a.currentPage-1)},a.selectNext=function(){a.noNext()||a.selectPage(a.currentPage+1)}}}}),angular.module("navigation",["mgcrea.ngStrap"]).factory("navigation",["$aside","$location",function(a,b){var c=a({title:"Main Menu",placement:"left",contentTemplate:"common/templates/main-menu.tpl.html",show:!1,animation:"am-fade-and-slide-left"});return{title:"",editUrl:"",newUrl:"",menu:{open:function(){c.$promise.then(function(){c.show()})},close:function(){c.$promise.then(function(){c.hide()})}},go:function(a){b.path(a)}}}]),angular.module("security",[]).factory("authorizationProvider",["$http","$rootScope",function(a,b){var c=JSON.parse(sessionStorage.getItem("auth"))||{isLoggedIn:!1,token:""};return{init:function(){b.auth=c},login:function(b,d,e,f){a.post("/index.cfm/authorize",{username:b,password:d}).success(function(a){c.isLoggedIn=!0,c.token=a.token,sessionStorage.setItem("auth",JSON.stringify(c)),e(a)}).error(function(a,b){c.isLoggedIn=!1,c.token="",sessionStorage.setItem("auth",JSON.stringify(c)),f(a,b)})},logout:function(){c.isLoggedIn=!1,c.token="",sessionStorage.setItem("auth",JSON.stringify(c))},isLoggedIn:function(){return c.isLoggedIn},token:c.token}}]).factory("securityInterceptor",["$q","$location","$rootScope",function(a,b,c){return{request:function(a){return c.auth&&c.auth.token&&"/index.cfm/authorize"!==a.url&&-1===a.url.indexOf("api.spotify.com")&&(a.headers["Auth-Token"]=c.auth.token),a},responseError:function(d){return"/index.cfm/authorize"!==d.config.url&&401===d.status&&(c.auth.isLoggedIn=!1,c.auth.token="",sessionStorage.setItem("auth",JSON.stringify(c.auth)),b.path("/login")),a.reject(d)}}}]),angular.module("songs.pods",["songs.service","videos.modal"]).directive("songPods",["Song",function(a){return{restrict:"E",scope:{songId:"="},template:'<div><div class="list-group"><h4 class="list-group-item list-group-item-heading">Tabs</h4><a ng-href="#/tabs/{{tab.id}}" class="list-group-item" ng-repeat="tab in tabs">{{tab.title}}</a><a ng-href="#/songs/{{songId}}/tabs/new" class="list-group-item">Add</a></div><div class="list-group"><h4 class="list-group-item list-group-item-heading">Videos</h4><a ng-href="#" class="list-group-item" ng-repeat="video in videos" video="video" video-modal>{{video.title}}</a><a ng-href="#/songs/{{songId}}/videos/new" class="list-group-item">Add</a></div><div>',replace:!0,link:function(b){var c=b.$watch("songId",function(){if(b.songId){var d={id:b.songId,fields:"id,title,tabs,videos"};a.customGet(d,function(a){b.tabs=a.data.tabs,b.videos=a.data.videos}),c()}})}}}]);var songService=angular.module("songs.service",[]);songService.factory("Song",["$http","$q",function(a){var b="/index.cfm/songs",c=function(a){angular.extend(this,a)};return c.get=function(b,c,d){a.get("/index.cfm/songs/"+b+"?fields=id,title,tags,spotifyId,artist,album").then(c,d)},c.customGet=function(b,c,d){var e={id:0,fields:"id,title,tags,spotifyId,artist,album"};b=angular.extend(e,b),a.get("/index.cfm/songs/"+b.id+"?fields="+b.fields).then(c,d)},c.getItems=function(b,c,d){var e={limit:10,offset:0,fields:"id,title,tags,artist,album",expand:0};b=angular.extend(e,b),a.get("/index.cfm/songs?limit="+b.limit+"&offset="+b.offset+"&expand="+b.expand+"&fields="+b.fields).then(c,d)},c.search=function(b){return a.get("/index.cfm/songs/search/"+b)},c.prototype.save=function(c,d){d||(d=function(){});var e=this;this.id&&""!==this.id?a.put(b+"/"+this.id,{title:this.title,spotifyData:this.spotifyData,artist:this.artist,tags:this.tags}).then(function(a){e.id=a.data.id,c(a)},d):a.post(b,{title:this.title,spotifyData:this.spotifyData,artist:this.artist,tags:this.tags}).then(function(a){e.id=a.data.id,c(a)},d)},c.prototype.getTabs=function(b,c){a.get("/index.cfm/songs/"+this.id+"/tabs").then(b,c)},c}]),songs=angular.module("songs",["songs.service","songs.pods","spotify","navigation","mgcrea.ngStrap"]),songs.controller("SongListCtrl",["$scope","Song","navigation",function(a,b,c){a.navigation=c,a.pagination={},b.getItems({limit:10},function(b){a.songs=b.data.items,a.pagination.count=Math.ceil(b.data.total/b.data.limit),a.pagination.current=parseInt(b.data.offset,8)+1}),a.changePage=function(c){var d=c-1;b.getItems({offset:d},function(b){a.songs=b.data.items})}}]),songs.controller("SongDetailCtrl",["$scope","Song","Track","$routeParams","navigation",function(a,b,c,d,e){a.navigation=e,b.get(d.id,function(d){a.song=new b(d.data),a.tabs=a.song.getTabs(function(a){console.log(a)}),e.title=a.song.title,c.get(a.song.spotifyId,function(b,c){a.track=b,a.spotifyData=c})})}]),songs.controller("SongEditCtrl",["$scope","Song","$routeParams","navigation","$alert",function(a,b,c,d,e){a.song={},a.tags=[],c.id?b.get(c.id,function(c){a.song=new b(c.data),angular.forEach(a.song.tags,function(b){a.tags.push({text:b})}),d.title=a.song.title,d.editUrl="/songs/edit/"+a.song.id}):(a.song=new b,d.title="New Song"),a.save=function(){a.song.tags=[],angular.forEach(a.tags,function(b){a.song.tags.push(b.text)}),a.song.save(function(){d.title=a.song.title,e({title:"Saved!",content:"The song was saved successfully.",placement:"top-right",type:"success",duration:5,keyboard:!0,show:!0})},function(a){var b=e({title:"Error!",placement:"top-right",type:"danger",duration:5,keyboard:!0,show:!1});b.content=(a.status=404)?"Some required data was missing.":"An error occured while saving.",b.show()})}}]);var spotifySearch=angular.module("spotify.search",["mgcrea.ngStrap","spotify.service"]);spotifySearch.directive("spotifySearch",["$modal","Track","SpotifyArtist",function(a,b,c){return{restrict:"E",scope:{song:"="},template:'<a href="" style="margin-left: 10px" ng-click="openSearch()">Search</a>',replace:!0,link:function(d){d.search={track:"",artist:""};
var e=a({scope:d,title:"Song Search",contentTemplate:"spotify/spotify-search.tpl.html",show:!1});d.openSearch=function(){e.$promise.then(function(){e.show(),e.$element.find("input[type='text']").get(0).focus()})},d.search.findTracks=function(){""!==d.track&&b.search(this.track,this.artist,function(a){d.tracks=a})},d.search.selectTrack=function(a){d.song={title:a.title,artist:{name:a.artist.name}},b.get(a.id,function(a){d.song.spotifyId=a.id,d.song.album=a.album}),c.get(a.artist.id,function(a){d.song.artist.spotifyData=a}),e.$promise.then(e.hide)}}}}]),spotifySearch.directive("spotifyArtistSearch",["$modal","SpotifyArtist",function(a,b){return{restrict:"E",scope:{artist:"="},template:'<a href="" style="margin-left: 10px" ng-click="openSearch()">Search</a>',replace:!0,link:function(c){c.search={artist:""};var d=a({scope:c,title:"Artist Search",contentTemplate:"spotify/spotify-artist-search.tpl.html",show:!1});c.openSearch=function(){d.$promise.then(function(){d.show(),d.$element.find("input[type='text']").get(0).focus()})},c.search.find=function(){""!==c.artist&&b.search(this.artist,function(a){c.artists=a})},c.search.selectArtist=function(a){c.artist={name:"",id:"",spotifyData:{}},b.get(a.id,function(a){c.artist.name=a.name,c.artist.spotifyData=a}),d.$promise.then(d.hide)}}}}]);var spotify=angular.module("spotify.service",[]);spotify.factory("Track",["$http","$q",function(a){var b=function(a){angular.extend(this,a)};return b.search=function(b,c,d,e){var f=[],g="track:"+b;c&&""!==c&&(g=g+"+artist:"+c),a.get("https://api.spotify.com/v1/search?q="+g+'"&type=track').then(function(a){angular.forEach(a.data.tracks.items,function(a){var b={title:a.name,uri:a.uri,id:a.id,preview:a.preview_url,artist:{name:a.artists[0].name,uri:a.artists[0].uri,id:a.artists[0].id},album:{title:a.album.name,uri:a.album.uri}};b.album.image=a.album.images[1]||a.album.images[0]||void 0,f.push(b)}),d(f)},e)},b.get=function(b,c,d){a.get("https://api.spotify.com/v1/tracks/"+b).then(function(a){var b=a.data,d={title:b.name,uri:b.uri,id:b.id,preview:b.preview_url,duration_ms:b.duration_ms,track_number:b.track_number,artist:{name:b.artists[0].name,uri:b.artists[0].uri,id:b.artists[0].id},album:{title:b.album.name,uri:b.album.uri,images:b.album.images}};c(d,b)},d)},b}]),spotify.factory("SpotifyArtist",["$http","$q",function(a){var b=function(a){angular.extend(this,a)};return b.search=function(b,c,d){a.get('https://api.spotify.com/v1/search?q=artist:"'+b+'"&type=artist').then(function(a){c(a.data.artists.items)},d)},b.get=function(b,c,d){a.get("https://api.spotify.com/v1/artists/"+b).then(function(a){var b={name:a.data.name,uri:a.data.uri,id:a.data.id,genres:a.data.genres,images:a.data.images};c(b,a.data)},d)},b}]),angular.module("spotify",["spotify.service","spotify.search"]);var tabService=angular.module("tabs.service",[]);tabService.factory("Tab",["$http","$q",function(a){var b="/index.cfm/tabs",c=function(a){this.song={title:"",artist:{name:""}},angular.extend(this,a)};return c.get=function(b,c,d){a.get("/index.cfm/tabs/"+b).then(c,d)},c.getItems=function(b,c,d){var e={limit:10,offset:0,fields:"id,title,tags,song",expand:0,filter:""};b=angular.extend(e,b),a.get("/index.cfm/tabs?limit="+b.limit+"&offset="+b.offset+"&expand="+b.expand+"&fields="+b.fields+"&filter="+b.filter).then(c,d)},c.prototype.save=function(c,d){d||(d=function(){});var e=this;this.id&&""!==this.id?a.put(b+"/"+this.id,{id:this.id,title:this.title,key:this.key,content:this.content,song:this.song,tags:this.tags}).then(function(a){e.id=a.data.id,c(a)},d):a.post(b,{id:this.id,title:this.title,key:this.key,content:this.content,song:this.song,tags:this.tags}).then(function(a){e.id=a.data.id,c(a)},d)},c}]);var tabs=angular.module("tabs",["tabs.service","songs","spotify","navigation","directives.pagination","mgcrea.ngStrap","ngTagsInput"]);tabs.controller("TabListCtrl",["$scope","navigation","Tab",function(a,b,c){a.pagination={},a.filter="",c.getItems({limit:10},function(b){a.tabs=b.data.items,a.pagination.count=Math.ceil(b.data.total/b.data.limit),a.pagination.current=parseInt(b.data.offset,8)+1,a.ready=!0}),a.go=b.go,a.changePage=function(b){var d=b-1;c.getItems({offset:d,filter:a.filter},function(b){a.tabs=b.data.items})},a.$watch(function(a){return a.filter},function(){c.getItems({limit:10,filter:a.filter},function(b){a.tabs=b.data.items,a.pagination.count=Math.ceil(b.data.total/b.data.limit),a.pagination.current=parseInt(b.data.offset,8)+1})})}]),tabs.controller("TabDetailCtrl",["$scope","Tab","$routeParams","navigation",function(a,b,c,d){b.get(c.id,function(c){a.tab=new b(c.data),d.title=a.tab.title,d.editUrl="/tabs/edit/"+a.tab.id})}]),tabs.controller("TabEditCtrl",["$scope","Tab","Song","$routeParams","$alert",function(a,b,c,d,e){a.tab={},a.tags=[],d.id?b.get(d.id,function(c){a.tab=new b(c.data),angular.forEach(a.tab.tags,function(b){a.tags.push({text:b})})}):(a.tab=new b,d.songId&&c.get(d.songId,function(b){a.tab.song=new c(b.data)})),a.getSongs=function(a){return""!==a?c.search(a).then(function(a){return a.data.items}):[]},a.save=function(){a.tab.tags=[],angular.forEach(a.tags,function(b){a.tab.tags.push(b.text)}),"string"==typeof a.tab.song&&(a.tab.song=new c({title:a.tab.song,tags:[]})),a.tab.save(function(){e({title:"Saved!",content:"The tab was saved successfully.",placement:"top-right",type:"success",duration:5,keyboard:!0,show:!0})},function(a){var b=e({title:"Error!",placement:"top-right",type:"danger",duration:5,keyboard:!0,show:!1});b.content=(a.status=404)?"Some required data was missing.":"An error occured while saving.",b.show()})}}]);var tagService=angular.module("tags.service",[]);tagService.factory("Tag",["$http","$q",function(a){var b=function(a){angular.extend(this,a)};return b.get=function(b,c,d){a.get("/index.cfm/tags/"+b).then(c,d)},b.getItems=function(b,c,d){var e={limit:10,offset:0,fields:"id,title,total",expand:0,filter:""};b=angular.extend(e,b),a.get("/index.cfm/tags?limit="+b.limit+"&offset="+b.offset+"&expand="+b.expand+"&fields="+b.fields+"&filter="+b.filter).then(c,d)},b}]);var tags=angular.module("tags",["tags.service","songs.service","navigation"]);tags.controller("TagListCtrl",["$scope","navigation","Tag",function(a,b,c){a.pagination={},a.filter="",c.getItems({limit:10},function(b){a.tags=b.data.items,a.pagination.count=Math.ceil(b.data.total/b.data.limit),a.pagination.current=parseInt(b.data.offset,8)+1}),a.go=b.go,a.changePage=function(b){var d=b-1;c.getItems({offset:d},function(b){a.tags=b.data.items})},a.$watch(function(a){return a.filter},function(){c.getItems({limit:10,filter:a.filter},function(b){a.tags=b.data.items,a.pagination.count=Math.ceil(b.data.total/b.data.limit),a.pagination.current=parseInt(b.data.offset,8)+1})})}]),tags.controller("TagDetailCtrl",["$scope","Tag","$routeParams","navigation",function(a,b,c,d){a.go=d.go,b.get(c.id,function(c){a.tag=new b(c.data),d.title=a.tag.title,console.log(a.tag)})}]),angular.module("videos.modal",["mgcrea.ngStrap"]).directive("videoModal",["$modal","$sce",function(a,b){return{restrict:"A",scope:{video:"="},replace:!1,link:function(c,d){var e=a({scope:c,title:c.video.title,contentTemplate:"videos/video-modal.tpl.html",show:!1});c.videoUrl=b.trustAsResourceUrl("https://www.youtube.com/embed/"+c.video.code),d.on("click",function(a){a.preventDefault(),e.$promise.then(function(){e.show()})})}}}]);var videoService=angular.module("videos.service",[]);videoService.factory("Video",["$http","$q",function(a){var b="/index.cfm/videos",c=function(a){this.song={title:"",artist:{name:""}},angular.extend(this,a)};return c.get=function(b,c,d){a.get("/index.cfm/videos/"+b).then(c,d)},c.getItems=function(b,c,d){var e={limit:10,offset:0,fields:"id,title,code,tags,song",expand:0,filter:""};b=angular.extend(e,b),a.get("/index.cfm/videos?limit="+b.limit+"&offset="+b.offset+"&expand="+b.expand+"&fields="+b.fields+"&filter="+b.filter).then(c,d)},c.prototype.save=function(c,d){d||(d=function(){});var e=this;this.id&&""!==this.id?a.put(b+"/"+this.id,{id:this.id,title:this.title,code:this.code,song:this.song,tags:this.tags}).then(function(a){e.id=a.data.id,c(a)},d):a.post(b,{id:this.id,title:this.title,code:this.code,song:this.song,tags:this.tags}).then(function(a){e.id=a.data.id,c(a)},d)},c}]);var videos=angular.module("videos",["videos.service","videos.modal","songs.service","navigation","mgcrea.ngStrap","ngTagsInput","spotify"]);videos.controller("VideoListCtrl",["$scope","navigation","Video",function(a,b,c){a.pagination={},c.getItems({limit:10},function(b){a.videos=b.data.items,a.pagination.count=Math.ceil(b.data.total/b.data.limit),a.pagination.current=parseInt(b.data.offset,8)+1}),a.go=b.go,a.filter="",a.changePage=function(b){var d=b-1;c.getItems({offset:d},function(b){a.videos=b.data.items})},a.$watch(function(a){return a.filter},function(){c.getItems({limit:10,filter:a.filter},function(b){a.videos=b.data.items,a.pagination.count=Math.ceil(b.data.total/b.data.limit),a.pagination.current=parseInt(b.data.offset,8)+1})})}]),videos.controller("VideoDetailCtrl",["$scope","Video","$routeParams","navigation","$sce",function(a,b,c,d,e){b.get(c.id,function(c){a.video=new b(c.data),a.videoUrl=e.trustAsResourceUrl("https://www.youtube.com/embed/"+a.video.code),d.title=a.video.title,d.editUrl="/videos/edit/"+a.video.id})}]),videos.controller("VideoEditCtrl",["$scope","Video","Song","$routeParams","navigation","$alert",function(a,b,c,d,e,f){a.video={},a.tags=[],d.id?b.get(d.id,function(c){a.video=new b(c.data),angular.forEach(a.video.tags,function(b){a.tags.push({text:b})}),e.title=a.video.title,e.editUrl="/videos/edit/"+a.video.id}):(a.video=new b,d.songId&&c.get(d.songId,function(b){a.video.song=new c(b.data)})),a.getSongs=function(a){return""!==a?c.search(a).then(function(a){return a.data.items}):[]},a.save=function(){a.video.tags=[],angular.forEach(a.tags,function(b){a.video.tags.push(b.text)}),a.video.save(function(){f({title:"Saved!",content:"The video was saved successfully.",placement:"top-right",type:"success",duration:5,keyboard:!0,show:!0})},function(a){var b=f({title:"Error!",placement:"top-right",type:"danger",duration:5,keyboard:!0,show:!1});b.content=(a.status=404)?"Some required data was missing.":"An error occured while saving.",b.show()})}}]);